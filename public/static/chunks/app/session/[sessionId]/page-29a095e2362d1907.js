(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4111],{1811:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(5155),n=t(2115),o=t(5695),r=t(6120),i=t.n(r);function c(e){let{sessionId:s,initialSoap:t}=e,[o,r]=(0,n.useState)(t),[c,l]=(0,n.useState)(!1),[u,_]=(0,n.useState)(null),[d,h]=(0,n.useState)(!1),p=(e,s)=>{r(t=>({...t,[e]:s})),h(!1),_(null)},x=async()=>{l(!0),_(null),h(!1);try{let e=await fetch("/api/sessions/".concat(s),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({soapNote:o})});if(!e.ok){let s=await e.text();throw Error("Failed to save: ".concat(e.status," – ").concat(s))}h(!0)}catch(e){console.error(e),_(e.message||"Unknown error")}finally{l(!1)}};return(0,a.jsxs)("div",{className:i().container,children:[u&&(0,a.jsxs)("p",{className:i().error,children:["Error saving: ",u]}),d&&(0,a.jsx)("p",{className:i().success,children:"Saved!"}),(0,a.jsxs)("section",{className:i().section,children:[(0,a.jsx)("h4",{children:"Subjective"}),(0,a.jsx)("textarea",{className:i().textarea,value:o.subjective,onChange:e=>p("subjective",e.target.value)})]}),(0,a.jsxs)("section",{className:i().section,children:[(0,a.jsx)("h4",{children:"Objective"}),(0,a.jsx)("textarea",{className:i().textarea,value:o.objective,onChange:e=>p("objective",e.target.value)})]}),(0,a.jsxs)("section",{className:i().section,children:[(0,a.jsx)("h4",{children:"Assessment"}),(0,a.jsx)("textarea",{className:i().textarea,value:o.assessment,onChange:e=>p("assessment",e.target.value)})]}),(0,a.jsxs)("section",{className:i().section,children:[(0,a.jsx)("h4",{children:"Plan"}),(0,a.jsx)("textarea",{className:i().textarea,value:o.plan,onChange:e=>p("plan",e.target.value)})]}),(0,a.jsx)("div",{className:i().footer,children:(0,a.jsx)("button",{className:i().saveBtn,onClick:x,disabled:c,children:c?"Saving…":"Save Changes"})})]})}var l=t(9719),u=t.n(l);function _(){let{sessionId:e}=(0,o.useParams)(),[s,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),[l,_]=(0,n.useState)(null);if((0,n.useEffect)(()=>{(async()=>{i(!0);try{let s=await fetch("/api/sessions/".concat(e));if(!s.ok)throw Error("Failed: ".concat(s.status));let a=await s.json();t(a)}catch(e){console.error(e),_(e.message)}finally{i(!1)}})()},[e]),r)return(0,a.jsx)("p",{className:u().loading,children:"Loading session…"});if(l)return(0,a.jsxs)("p",{className:u().error,children:["Error: ",l]});if(!s)return(0,a.jsx)("p",{className:u().empty,children:"Session not found."});let{transcript:d,soapNote:h,sessionDate:p,clientInitials:x}=s;return(0,a.jsxs)("div",{className:u().container,children:[(0,a.jsxs)("h1",{className:u().heading,children:["Session for ",x]}),(0,a.jsx)("p",{className:u().date,children:new Date(p).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,a.jsxs)("section",{className:u().transcriptSection,children:[(0,a.jsx)("h2",{children:"Transcript"}),(0,a.jsx)("pre",{className:u().transcript,children:d})]}),(0,a.jsxs)("section",{className:u().soapSection,children:[(0,a.jsx)("h2",{children:"SOAP Note (Editable)"}),(0,a.jsx)(c,{sessionId:e,initialSoap:h})]})]})}},3742:(e,s,t)=>{Promise.resolve().then(t.bind(t,1811))},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"notFound")&&t.d(s,{notFound:function(){return a.notFound}}),t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},6120:e=>{e.exports={notesContainer:"soapNotesTab_notesContainer__BtERx",section:"soapNotesTab_section__9MkAM",heading:"soapNotesTab_heading__hI4Rp",copyBtn:"soapNotesTab_copyBtn__wnj1K",textarea:"soapNotesTab_textarea__oGtFC",textContent:"soapNotesTab_textContent__6DELu",footer:"soapNotesTab_footer__Q0CF0",copyNoteBtn:"soapNotesTab_copyNoteBtn__aYXcp",actionBtn:"soapNotesTab_actionBtn__FXrvl",deleteNoteBtn:"soapNotesTab_deleteNoteBtn__UXhU_"}},9719:e=>{e.exports={container:"SessionDetail_container__V2K40",heading:"SessionDetail_heading__ybI8C",date:"SessionDetail_date__xz9ST",transcriptSection:"SessionDetail_transcriptSection__lB06O",soapSection:"SessionDetail_soapSection__bRp0S",transcript:"SessionDetail_transcript__VXux3",loading:"SessionDetail_loading__5ryca",error:"SessionDetail_error__xZ15i",empty:"SessionDetail_empty__VCo14",backButton:"SessionDetail_backButton__s25XC"}}},e=>{var s=s=>e(e.s=s);e.O(0,[958,8441,1684,7358],()=>s(3742)),_N_E=e.O()}]);