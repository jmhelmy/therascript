(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{369:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var s=n(5155),r=n(2115),i=n(5695),o=n(9576);function a(){let[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(!1),[c,l]=(0,r.useState)(null),d=(0,i.useRouter)(),{user:u,loading:h}=(0,o.A)();(0,r.useEffect)(()=>{h||u||d.push("/login")},[h,u,d]);let m=async()=>{if(!e)return void l("Please confirm consent by checking the box.");if(!u)return void l("Authentication required to log consent.");a(!0),l(null);try{let e=await fetch("/api/consent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({consentVersion:"v1.0",userId:u.uid})}),t=await e.json();if(t.success)d.push("/session/record");else throw Error(t.message||"Failed to log consent.")}catch(e){console.error("Error logging consent:",e),l(e.message||"An unexpected error occurred while logging consent.")}finally{a(!1)}};return h?(0,s.jsx)("div",{children:"Loading authentication status…"}):u?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4 font-sans",children:(0,s.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-xl w-full max-w-md",children:[(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-6 text-center text-gray-800",children:"Client Consent Confirmation"}),(0,s.jsxs)("div",{className:"border border-gray-300 p-4 rounded-md mb-6 max-h-60 overflow-y-auto text-sm text-gray-700 space-y-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"TheraNote Client Consent Agreement (Version 1.0)"}),(0,s.jsx)("p",{children:"Please read this consent agreement carefully. By proceeding, you confirm that you have discussed the use of TheraNote's recording and note generation features with your client and have obtained their explicit consent."}),(0,s.jsx)("p",{className:"font-semibold text-red-600",children:"[Insert full, legally reviewed consent text here. This should cover data recording, transcription, summarization, storage, privacy, and HIPAA compliance details relevant to the client.]"}),(0,s.jsx)("p",{children:"Key points generally covered:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside pl-4 space-y-1",children:[(0,s.jsx)("li",{children:"Purpose of recording (e.g., for generating therapy notes)."}),(0,s.jsx)("li",{children:"How recordings are processed (e.g., transcription, AI summarization)."}),(0,s.jsx)("li",{children:"How recordings are stored (e.g., encrypted in secure cloud storage)."}),(0,s.jsx)("li",{children:"How therapy notes are stored (e.g., encrypted in a HIPAA-compliant database)."}),(0,s.jsx)("li",{children:"Confidentiality and privacy measures."}),(0,s.jsx)("li",{children:"Client's right to withdraw consent and how to do so."}),(0,s.jsx)("li",{children:"Data retention policies."})]}),(0,s.jsx)("p",{className:"font-semibold",children:"By checking the box below, you attest that you have:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside pl-4 space-y-1",children:[(0,s.jsx)("li",{children:"Reviewed this consent agreement with your client."}),(0,s.jsx)("li",{children:"Answered all their questions to their satisfaction."}),(0,s.jsx)("li",{children:"Confirmed their understanding and agreement to proceed using TheraNote."})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-md mb-6 bg-gray-50",children:[(0,s.jsx)("input",{type:"checkbox",id:"consentCheckbox",checked:e,onChange:e=>{t(e.target.checked),l(null)},className:"mt-1 h-5 w-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500","aria-describedby":"consent-description"}),(0,s.jsx)("label",{htmlFor:"consentCheckbox",id:"consent-description",className:"text-sm text-gray-700 select-none",children:"I confirm I have obtained and documented explicit consent from my client to use TheraNote for AI-assisted note generation for this session."})]}),c&&(0,s.jsx)("p",{className:"text-sm text-red-600 mb-4 text-center animate-pulse",children:c}),(0,s.jsx)("button",{onClick:m,disabled:!e||n,className:"w-full py-3 px-4 rounded-md text-white font-semibold transition-colors duration-150\n            ".concat(e&&!n?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"),children:n?"Processing…":"Confirm Consent & Proceed"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Your confirmation will be logged securely."})]})}):(0,s.jsx)("div",{children:"Authentication required. Redirecting..."})}},2239:(e,t,n)=>{"use strict";n.d(t,{j:()=>c,k:()=>l});var s=n(3915),r=n(6203),i=n(5317);let o={apiKey:"AIzaSyB8XOlU5pDZV0FWvnRLk3520uYEgwbVmac",authDomain:"therascript-45b62.firebaseapp.com",projectId:"therascript-45b62",storageBucket:"therascript-45b62.appspot.com",messagingSenderId:"64757237031",appId:"1:64757237031:web:c541b0cf649c0d88fb5502"};console.log("\uD83D\uDD25 Firebase config being used:",o);let a=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)(o),c=(0,r.getAuth)(a),l=(0,i.aU)(a)},5695:(e,t,n)=>{"use strict";var s=n(8999);n.o(s,"notFound")&&n.d(t,{notFound:function(){return s.notFound}}),n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(t,{useSearchParams:function(){return s.useSearchParams}})},7796:(e,t,n)=>{Promise.resolve().then(n.bind(n,369))},9576:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,AuthProvider:()=>a});var s=n(5155),r=n(2115),i=n(2239);let o=(0,r.createContext)(void 0),a=e=>{let{children:t}=e,[n,a]=(0,r.useState)(null),[c,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=i.j.onAuthStateChanged(e=>{a(e),l(!1)});return()=>e()},[]);let d=async()=>{await i.j.signOut()};return(0,s.jsx)(o.Provider,{value:{user:n,loading:c,signOut:d},children:t})},c=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[93,2992,3915,9207,8441,1684,7358],()=>t(7796)),_N_E=e.O()}]);